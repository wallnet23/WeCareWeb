<div *ngIf="idsystem > 0; else blockError;" class="container fullPage p-1 p-md-2 p-lg-3">
    <div class="row justify-content-center align-items-center mt-4">
        <div class="col-12 text-center" style="font-size: xx-large; font-weight: bold;">
            {{systemInfo.stepOne!.system_name}}
        </div>
    </div>

    <div class="row justify-content-center align-items-center mt-2 p-md-1 p-lg-2 p-xl-3">
        <div class="col-12 fst-italic text-center">
            {{systemInfo.stepOne!.system_description}}
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-8 col-xxl-6 mb-3">
            <div class="card mt-4" style="height: 100%;">
                <div class="card-header">
                    <div class="text-center title">
                        System Owner
                    </div>
                </div>
                <div class="card-body mt-3">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-12 col-sm-6 col-lg-4 mb-4">
                            <span class="subtitles me-5">Name: </span>
                            <p class="content">{{systemInfo.stepOne!.customer_name}}</p>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-4 mb-4">
                            <span class="subtitles me-5">Surname: </span>
                            <p class="content">{{systemInfo.stepOne!.customer_surname}}</p>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-4 mb-4">
                            <span class="subtitles me-5">Phone: </span>
                            <p class="content">{{systemInfo.stepOne!.customer_phone}}</p>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-4 mb-4">
                            <span class="subtitles me-5">Country: </span>
                            <p class="content">{{customerCountry}}</p>
                        </div>
                        <div *ngIf="systemInfo?.stepOne?.ccn3 !== '380'; else italianBlock">
                            <div class="col-12 col-sm-6 col-lg-4 mb-4">
                                <span class="subtitles me-5">License Number: </span>
                                <p class="content">{{systemInfo.stepOne!.customer_licensenumber}}</p>
                            </div>
                        </div>
                        <ng-template #italianBlock>
                            <div class="col-12 col-sm-6 col-lg-4 mb-4">
                                <span class="subtitles me-5">Fiscal Code: </span>
                                <p class="content">{{systemInfo.stepOne!.customer_fiscalcode}}</p>
                            </div>
                            <div class="col-12 col-sm-6 col-lg-4 mb-4">
                                <span class="subtitles me-5">VAT: </span>
                                <p class="content">{{systemInfo.stepOne!.customer_vat}}</p>
                            </div>
                        </ng-template>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-10 col-lg-8 col-xxl-6 mb-3">
            <div class="card mt-4" style="height: 100%;">
                <div class="card-header">
                    <div class="text-center title">
                        Installation Site
                    </div>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Country: </span>
                            <p class="content">{{installerCountry}}</p>
                        </div>
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Address: </span>
                            <p class="content">{{systemInfo.stepTwo!.location_address}}</p>
                        </div>
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">City: </span>
                            <p class="content">{{systemInfo.stepTwo!.location_city}}</p>
                        </div>
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Postal Code: </span>
                            <p class="content">{{systemInfo.stepTwo!.location_postalcode}}</p>
                        </div>

                        <div *ngIf="imagesStep2.length > 0" class="col-12 text-center">
                            <span class="subtitles">Attached Files</span>
                        </div>

                        <div class="container-fluid">
                            <div class="row justify-content-center align-items-center mt-4">
                                <ng-container *ngFor="let image2 of imagesStep2">
                                    <div class="col-xs-12 col-sm-6 col-md-2 mb-4 text-center"
                                        style="width: 100px; height: 100px;">
                                        <img [src]="urlServerLara + image2.src" [alt]="image2.title"
                                            class="img-fluid thumbnailImg" (click)="setImage(image2)"
                                            data-bs-toggle="modal" data-bs-target="#exampleModal">
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-10 col-lg-8 col-xxl-6 mb-3">
            <div class="card mt-4" style="height: 100%;">
                <div class="card-header">
                    <div class="title text-center">
                        Technician/Installer Info
                    </div>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Company Name: </span>
                            <p class="content">{{systemInfo.stepThree!.installer_companyname}}</p>
                        </div>
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Country: </span>
                            <p class="content">{{installerCountry}}</p>
                        </div>
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Address: </span>
                            <p class="content">{{systemInfo.stepThree!.installer_address}}</p>
                        </div>
                        <div class="col-12 col-sm-6">
                            <span class="subtitles">Email: </span>
                            <p class="content">{{systemInfo.stepThree!.installer_email}}</p>
                        </div>
                        <div class="col-12 text-start">
                            <span class="subtitles">Vendor Contact: </span>
                            <p class="content">{{systemInfo.stepThree!.vendor_contact}}</p>
                        </div>

                        <div *ngIf="imagesStep3.length > 0" class="col-12 text-center">
                            <span class="subtitles">Attached Files</span>
                        </div>

                        <div class="col-12 text-center">
                            <ng-container *ngFor="let image3 of imagesStep3">
                                <div class="col-xs-12 col-sm-6 col-md-2 mb-4 text-center"
                                    style="width: 100px; height: 100px;">
                                    <img [src]="urlServerLara + image3.src" [alt]="image3.title"
                                        class="img-fluid thumbnailImg">
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-10 col-lg-8 col-xxl-6 mb-3">
            <div class="card mt-4" style="height: 100%;">
                <div class="card-header">
                    <div class="col-12 mb-2" style="font-size: large; font-weight: bold;">
                        STEP FOUR
                    </div>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-12">
                            TO DO
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <img [src]="urlServerLara + modalImageUrl" class="img-fluid">
        </div>
    </div>
</div>

<ng-template #blockError class="mt-4 p-2 text-center">
    <h1>LOADING ERROR</h1><br>
    <h3 class="mt-4">Refresh the page to try again</h3>
</ng-template>